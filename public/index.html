<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Tracker</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>
<body>
    <div id="app">
        <!-- Header -->
        <header class="header" :class="{ 'scrolled': isScrolled }">
            <div class="container">
                <div class="header-content">
                    <div class="logo">
                        <div class="logo-icon">GT</div>
                        <span class="logo-text">GameTracker</span>
                    </div>
                    
                    <nav class="nav" v-if="isAuthenticated">
                        <button 
                            v-for="item in navItems" 
                            :key="item.id"
                            @click="currentSection = item.id"
                            :class="['nav-item', { active: currentSection === item.id }]"
                        >
                            <span class="nav-text">{{ item.name }}</span>
                        </button>
                    </nav>

                    <div class="header-actions">
                        <div v-if="isAuthenticated" class="user-section">
                            <button @click="currentSection = 'profile'" class="user-btn">
                                
                                <div class="user-avatar">
                                    <span v-if="currentUser?.username">{{ currentUser.username.charAt(0).toUpperCase() }}</span>
                                </div>
                                <span class="user-name">{{ currentUser?.username }}</span>
                            </button>
                            <button @click="logout" class="logout-btn" title="–í—ã–π—Ç–∏">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>
                                </svg>
                            </button>
                        </div>
                        <div v-else class="auth-section">
                            <button @click="showLogin = true" class="auth-btn login-btn">–í—Ö–æ–¥</button>
                            <button @click="showRegister = true" class="auth-btn register-btn">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
                        </div>
                    </div>
                </div>
            </div>
        </header>


        <!-- Hero Section for Guests -->
        <section v-if="!isAuthenticated" class="hero">
            <div class="hero-background">
                <div class="hero-particles"></div>
            </div>
            <div class="container">
                <div class="hero-content">
                    <div class="hero-badge">–õ–£–ß–®–ò–ô –¢–†–ï–ö–ï–† –ò–ì–†</div>
                    <h1 class="hero-title">
                        –û—Ç—Å–ª–µ–∂–∏–≤–∞–π —Å–≤–æ–∏ 
                        <span class="gradient-text">–∏–≥—Ä–æ–≤—ã–µ</span>
                        –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
                    </h1>
                    <p class="hero-description">
                        –ü–∏—à–∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Ä–µ—Ü–µ–Ω–∑–∏–∏, —Å–æ–±–∏—Ä–∞–π –∫–æ–ª–ª–µ–∫—Ü–∏—é –∏–≥—Ä –∏ –Ω–∞—Ö–æ–¥–∏ –µ–¥–∏–Ω–æ–º—ã—à–ª–µ–Ω–Ω–∏–∫–æ–≤ 
                        –≤ —Å–∞–º–æ–º –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–º –∏–≥—Ä–æ–≤–æ–º —Å–æ–æ–±—â–µ—Å—Ç–≤–µ
                    </p>
                    <div class="hero-actions">
                        <button @click="showRegister = true" class="btn btn-primary btn-large">
                            –ù–∞—á–∞—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω–æ
                        </button>
                        <button @click="showLogin = true" class="btn btn-secondary btn-large">
                            –£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç?
                        </button>
                    </div>
                    <div class="hero-stats">
                        <div class="stat">
                            <div class="stat-number">{{ totalGames }}+</div>
                            <div class="stat-label">–ò–≥—Ä –≤ –∫–æ–ª–ª–µ–∫—Ü–∏—è—Ö</div>
                        </div>
                        <div class="stat">
                            <div class="stat-number">{{ totalReviews }}+</div>
                            <div class="stat-label">–†–µ—Ü–µ–Ω–∑–∏–π –Ω–∞–ø–∏—Å–∞–Ω–æ</div>
                        </div>
                        <div class="stat">
                            <div class="stat-number">{{ users.length }}+</div>
                            <div class="stat-label">–ò–≥—Ä–æ–∫–æ–≤ –≤ —Å–æ–æ–±—â–µ—Å—Ç–≤–µ</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>



        <!-- Main Content -->
        <main class="main" :class="{ 'authenticated': isAuthenticated }">
            <div class="container">
                <section v-if="isAuthenticated && currentSection === 'home'" class="section">
                    <div class="section-header">
                        <h2 class="section-title">
                            –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Ä–µ—Ü–µ–Ω–∑–∏–∏
                        </h2>
                        <p class="section-subtitle">–°–≤–µ–∂–∏–µ –º–Ω–µ–Ω–∏—è –æ—Ç —Å–æ–æ–±—â–µ—Å—Ç–≤–∞</p>
                    </div>

                    <div v-if="loading" class="loading-state">
                        <div class="spinner"></div>
                        <p>–ó–∞–≥—Ä—É–∂–∞–µ–º —Ä–µ—Ü–µ–Ω–∑–∏–∏...</p>
                    </div>

                    <div v-else class="reviews-grid modern-grid">
                        <div 
                            v-for="review in recentReviews" 
                            :key="review.id" 
                            class="review-card modern"
                        >
                            <!-- Header with author and rating -->
                            <div class="review-header-modern">
                                <div class="review-header-content">
                                    <div class="author-section-modern">
                                        <div class="user-avatar modern">
                                            {{ getAuthorInitial(review.user_id) }}
                                        </div>
                                        <div class="author-info-modern">
                                            <span class="author-name-modern">{{ getAuthorName(review.user_id) }}</span>
                                        </div>
                                    </div>
                                    
                                    <div class="rating-section-modern">
                                        <div class="rating-main-modern">
                                            <div class="rating-score-modern">
                                                {{ review.overall_rating }}
                                            </div>
                                            <div class="rating-breakdown-modern">
                                                <span class="rating-pill">{{ review.gameplay_rating }}</span>
                                                <span class="rating-pill">{{ review.graphics_rating }}</span>
                                                <span class="rating-pill">{{ review.story_rating }}</span>
                                                <span class="rating-pill">{{ review.music_rating }}</span>
                                                <span class="rating-pill">{{ review.atmosphere_rating }}</span>
                                            </div>
                                        </div>
                                        <div class="game-cover-modern">
                                            <img 
                                                :src="getGameCover(review.game_id)" 
                                                :alt="review.game_name"
                                                @error="(event) => handleImageError(event, review.game_id)"
                                                @load="handleImageLoad"
                                                loading="lazy"
                                            >
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Review Content -->
                            <div class="review-content-modern">
                                <h4 class="review-title-modern">{{ review.title }}</h4>
                                <p class="review-text-modern" :class="{ 'expanded': review.expanded }">
                                    {{ review.expanded ? review.content : getPreviewText(review.content) }}
                                </p>
                            </div>


                    <div class="review-footer-modern">
                        <div class="actions-left">
                            <button class="like-button">
                                <svg class="heart-icon" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                                </svg>
                                <span>{{ review.likes_count || 2 }}</span>
                            </button>
                            <button class="menu-button">
                                <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/>
                                </svg>
                            </button>
                        </div>
                        
                        <div class="actions-right">
                            <button class="view-button" @click="openReviewPage(review)">
                                <svg class="icon" viewBox="0 0 15 15" fill="currentColor">
                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M12 13C12.5523 13 13 12.5523 13 12V3C13 2.44771 12.5523 2 12 2H3C2.44771 2 2 2.44771 2 3V6.5C2 6.77614 2.22386 7 2.5 7C2.77614 7 3 6.77614 3 6.5V3H12V12H8.5C8.22386 12 8 12.2239 8 12.5C8 12.7761 8.22386 13 8.5 13H12ZM9 6.5C9 6.5001 9 6.50021 9 6.50031V6.50035V9.5C9 9.77614 8.77614 10 8.5 10C8.22386 10 8 9.77614 8 9.5V7.70711L2.85355 12.8536C2.65829 13.0488 2.34171 13.0488 2.14645 12.8536C1.95118 12.6583 1.95118 12.3417 2.14645 12.1464L7.29289 7H5.5C5.22386 7 5 6.77614 5 6.5C5 6.22386 5.22386 6 5.5 6H8.5C8.56779 6 8.63244 6.01349 8.69139 6.03794C8.74949 6.06198 8.80398 6.09744 8.85143 6.14433C8.94251 6.23434 8.9992 6.35909 8.99999 6.49708L8.99999 6.49738"/>
                                </svg>
                            </button>
                            <button class="eye-button" @click="toggleReviewExpand(review)">
                                <svg class="icon" viewBox="0 0 576 512" fill="currentColor">
                                    <path d="M288 80c-65.2 0-118.8 29.6-159.9 67.7C89.6 183.5 63 226 49.4 256c13.6 30 40.2 72.5 78.6 108.3C169.2 402.4 222.8 432 288 432s118.8-29.6 159.9-67.7C486.4 328.5 513 286 526.6 256c-13.6-30-40.2-72.5-78.6-108.3C406.8 109.6 353.2 80 288 80zM95.4 112.6C142.5 68.8 207.2 32 288 32s145.5 36.8 192.6 80.6c46.8 43.5 78.1 95.4 93 131.1c3.3 7.9 3.3 16.7 0 24.6c-14.9 35.7-46.2 87.7-93 131.1C433.5 443.2 368.8 480 288 480s-145.5-36.8-192.6-80.6C48.6 356 17.3 304 2.5 268.3c-3.3-7.9-3.3-16.7 0-24.6C17.3 208 48.6 156 95.4 112.6zM288 336c44.2 0 80-35.8 80-80s-35.8-80-80-80c-.7 0-1.3 0-2 0c1.3 5.1 2 10.5 2 16c0 35.3-28.7 64-64 64c-5.5 0-10.9-.7-16-2c0 .7 0 1.3 0 2c0 44.2 35.8 80 80 80zm0-208a128 128 0 1 1 0 256 128 128 0 1 1 0-256z"/>
                                </svg>
                            </button>
                        </div>
                    </div>


                    <div v-if="!loading && recentReviews.length === 0" class="empty-state">
                        <div class="empty-icon">üìù</div>
                        <h3>–ü–æ–∫–∞ –Ω–µ—Ç —Ä–µ—Ü–µ–Ω–∑–∏–π</h3>
                        <p>–ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º, –∫—Ç–æ –ø–æ–¥–µ–ª–∏—Ç—Å—è —Å–≤–æ–∏–º –º–Ω–µ–Ω–∏–µ–º!</p>
                        <button @click="currentSection = 'search'" class="btn btn-primary">
                            –ù–∞–ø–∏—Å–∞—Ç—å —Ä–µ—Ü–µ–Ω–∑–∏—é
                        </button>
                    </div>
                </section>

                 <!-- Review Detail Page -->
                 <section v-if="isAuthenticated && currentSection === 'review-detail'" class="section">
                    <div class="game-header" v-if="currentReviewGame">
                        <div class="game-hero">
                            <img 
                                :src="currentReviewGame.background_image || 'https://via.placeholder.com/1200x400/1a1b2e/6366f1?text=No+Image'" 
                                :alt="currentReviewGame.name" 
                                class="game-hero-image"
                            >
                            <div class="game-hero-overlay">
                                <div class="container">
                                    <div class="game-hero-content">
                                        <h1 class="game-title-large">{{ currentReviewGame.name }}</h1>
                                        <div class="game-meta-large">
                                            <div class="meta-item-large">
                                                <span class="meta-label">–î–∞—Ç–∞ –≤—ã—Ö–æ–¥–∞</span>
                                                <span class="meta-value">{{ currentReviewGame.released || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ' }}</span>
                                            </div>
                                            <div class="meta-item-large">
                                                <span class="meta-label">–†–µ–π—Ç–∏–Ω–≥</span>
                                                <span class="meta-value rating-large">{{ gameAverageRating }}/90</span>
                                            </div>
                                            <div class="meta-item-large">
                                                <span class="meta-label">–í—Å–µ–≥–æ —Ä–µ—Ü–µ–Ω–∑–∏–π</span>
                                                <span class="meta-value">{{ gameReviews.length }}</span>
                                            </div>
                                        </div>
                                        <div class="game-genres-large">
                                            <span 
                                                v-for="genre in currentReviewGame.genres?.slice(0, 3)" 
                                                :key="genre.id" 
                                                class="genre-tag-large"
                                            >
                                                {{ genre.name }}
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="review-detail-card">
                        <div class="review-detail-header">
                            <div class="review-author-large">
                                <div class="user-avatar medium">
                                    {{ getAuthorInitial(currentReview.user_id) }}
                                </div>
                                <div class="author-info-large">
                                    <span class="author-name-large">{{ getAuthorName(currentReview.user_id) }}</span>
                                    <span class="review-date-large">{{ formatDate(currentReview.created_at) }}</span>
                                </div>
                            </div>
                            <div class="review-rating-large">
                                <div class="rating-score-large">{{ currentReview.overall_rating }}/90</div>
                            </div>
                        </div>
                        
                        <h2 class="review-title-large">{{ currentReview.title }}</h2>
                        
                        <div class="rating-breakdown-large">
                            <div class="rating-category-large" v-for="category in ratingCategories" :key="category.key">
                                <div class="category-header-large">
                                    <span class="category-name-large">{{ category.name }}</span>
                                    <span class="category-rating-large">{{ currentReview[category.key] }}/10</span>
                                </div>
                                <div class="rating-bar-large">
                                    <div 
                                        class="rating-progress-large" 
                                        :class="category.key"
                                        :style="{ width: (currentReview[category.key] * 10) + '%' }"
                                    ></div>
                                </div>
                            </div>
                        </div>

                        <div class="review-content-large">
                            <p>{{ currentReview.content }}</p>
                        </div>

                        <div class="review-detail-actions">
                            <button @click="currentSection = 'home'" class="btn btn-outline">
                                ‚Üê –ù–∞–∑–∞–¥ –∫ —Ä–µ—Ü–µ–Ω–∑–∏—è–º
                            </button>
                            <button @click="openGamePage(currentReview.game_id)" class="btn btn-primary">
                                –°–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ —Ä–µ—Ü–µ–Ω–∑–∏–∏ –Ω–∞ –∏–≥—Ä—É
                            </button>
                        </div>
                    </div>
                </section>

                <!-- Game Detail Page -->
                <section v-if="isAuthenticated && currentSection === 'game-detail'" class="section">
                    <div class="game-header" v-if="currentGame">
                        <div class="game-hero">
                            <img 
                                :src="currentGame.background_image || 'https://via.placeholder.com/1200x400/1a1b2e/6366f1?text=No+Image'" 
                                :alt="currentGame.name" 
                                class="game-hero-image"
                            >
                            <div class="game-hero-overlay">
                                <div class="container">
                                    <div class="game-hero-content">
                                        <h1 class="game-title-large">{{ currentGame.name }}</h1>
                                        <div class="game-meta-large">
                                            <div class="meta-item-large">
                                                <span class="meta-label">–î–∞—Ç–∞ –≤—ã—Ö–æ–¥–∞</span>
                                                <span class="meta-value">{{ currentGame.released || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ' }}</span>
                                            </div>
                                            <div class="meta-item-large">
                                                <span class="meta-label">–†–µ–π—Ç–∏–Ω–≥ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞</span>
                                                <span class="meta-value rating-large">{{ gameAverageRating }}/90</span>
                                            </div>
                                            <div class="meta-item-large">
                                                <span class="meta-label">–í—Å–µ–≥–æ —Ä–µ—Ü–µ–Ω–∑–∏–π</span>
                                                <span class="meta-value">{{ gameReviews.length }}</span>
                                            </div>
                                        </div>
                                        <div class="game-genres-large">
                                            <span 
                                                v-for="genre in currentGame.genres?.slice(0, 3)" 
                                                :key="genre.id" 
                                                class="genre-tag-large"
                                            >
                                                {{ genre.name }}
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="game-reviews-section">
                        <div class="section-header">
                            <h2 class="section-title">–†–µ—Ü–µ–Ω–∑–∏–∏ –Ω–∞ –∏–≥—Ä—É</h2>
                            <p class="section-subtitle">{{ gameReviews.length }} —Ä–µ—Ü–µ–Ω–∑–∏–π –æ—Ç —Å–æ–æ–±—â–µ—Å—Ç–≤–∞</p>
                        </div>

                        <div class="reviews-grid">
                            <div 
                                v-for="review in gameReviews" 
                                :key="review.id" 
                                class="review-card"
                                @click="openReviewPage(review)"
                            >
                                <div class="review-card-header">
                                    <div class="review-author">
                                        <div class="user-avatar small">
                                            {{ getAuthorInitial(review.user_id) }}
                                        </div>
                                        <div class="author-info">
                                            <span class="author-name">{{ getAuthorName(review.user_id) }}</span>
                                            <span class="review-date">{{ formatDate(review.created_at) }}</span>
                                        </div>
                                    </div>
                                    <div class="game-rating">
                                        <div class="rating-score">{{ review.overall_rating }}/90</div>
                                    </div>
                                </div>
                                
                                <h4 class="review-title">{{ review.title }}</h4>
                                
                                <p class="review-content preview">
                                    {{ getPreviewText(review.content) }}
                                </p>

                                <div class="rating-breakdown">
                                    <div class="rating-category" v-for="category in ratingCategories" :key="category.key">
                                        <div class="category-header">
                                            <span class="category-name">{{ category.name }}</span>
                                            <span class="category-rating">{{ review[category.key] }}/10</span>
                                        </div>
                                        <div class="rating-bar">
                                            <div 
                                                class="rating-progress" 
                                                :class="category.key"
                                                :style="{ width: (review[category.key] * 10) + '%' }"
                                            ></div>
                                        </div>
                                    </div>
                                </div>

                                <div class="review-actions">
                                    <button class="btn btn-outline btn-sm">
                                        –ß–∏—Ç–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é ‚Üí
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div v-if="gameReviews.length === 0" class="empty-state">
                            <div class="empty-icon">üìù</div>
                            <h3>–ü–æ–∫–∞ –Ω–µ—Ç —Ä–µ—Ü–µ–Ω–∑–∏–π</h3>
                            <p>–ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º, –∫—Ç–æ –ø–æ–¥–µ–ª–∏—Ç—Å—è –º–Ω–µ–Ω–∏–µ–º –æ–± —ç—Ç–æ–π –∏–≥—Ä–µ!</p>
                        </div>
                    </div>
                </section>

                <!-- Search Section -->
                <section v-if="isAuthenticated && currentSection === 'search'" class="section">
                    <div class="section-header">
                        <h2 class="section-title">
                            –ü–æ–∏—Å–∫ –∏–≥—Ä
                        </h2>
                        <p class="section-subtitle">–ù–∞–π–¥–∏ —Å–≤–æ—é –ª—é–±–∏–º—É—é –∏–≥—Ä—É</p>
                    </div>
                    
                    <div class="search-section">
                        <div class="search-box">
                            <input 
                                v-model="searchQuery" 
                                type="text" 
                                placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–≥—Ä—ã..."
                                @keyup.enter="searchGames"
                                class="search-input"
                            >
                            <button @click="searchGames" class="btn btn-primary search-btn">
                                –ù–∞–π—Ç–∏
                            </button>
                        </div>

                        <div v-if="searchLoading" class="loading-state">
                            <div class="spinner"></div>
                            <p>–ò—â–µ–º –∏–≥—Ä—ã...</p>
                        </div>

                        <div v-else-if="searchResults.length > 0" class="search-results">
                            <h3 class="results-title">–ù–∞–π–¥–µ–Ω–æ {{ searchResults.length }} –∏–≥—Ä</h3>
                            <div class="games-grid">
                                <div 
                                    v-for="game in searchResults" 
                                    :key="game.id" 
                                    class="game-card"
                                >
                                    <div class="game-image">
                                        <img :src="game.background_image || 'https://via.placeholder.com/300x200/1a1b2e/6366f1?text=No+Image'" :alt="game.name">
                                    </div>
                                    <div class="game-content">
                                        <h3 class="game-title">{{ game.name }}</h3>
                                        <div class="game-meta">
                                            <div class="meta-item">
                                                <span>{{ game.rating || 'N/A' }}/5</span>
                                            </div>
                                            <div class="meta-item">
                                                <span>{{ game.released || '–î–∞—Ç–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞' }}</span>
                                            </div>
                                        </div>
                                        <div class="game-genres">
                                            <span v-for="genre in game.genres.slice(0, 2)" :key="genre.id" class="genre-tag">
                                                {{ genre.name }}
                                            </span>
                                        </div>
                                        <div class="game-actions">
                                            <button @click="viewGameReviews(game.id)" class="btn btn-outline btn-sm">
                                                –°–º–æ—Ç—Ä–µ—Ç—å —Ä–µ—Ü–µ–Ω–∑–∏–∏
                                            </button>
                                            <button @click="openReviewModal(game)" class="btn btn-primary btn-sm">
                                                –ù–∞–ø–∏—Å–∞—Ç—å —Ä–µ—Ü–µ–Ω–∑–∏—é
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div v-else-if="searched && !searchLoading" class="empty-state">
                            <div class="empty-icon">üéØ</div>
                            <h3>–ò–≥—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
                            <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å</p>
                        </div>

                        
                    </div> 
                </section> 



               <!-- Profile Section -->
                <section v-if="isAuthenticated && currentSection === 'profile'" class="section">
                    <div class="profile-header">
                        <div class="profile-avatar-section">
                            <div class="user-avatar xlarge">
                                <span>{{ currentUser?.username?.charAt(0)?.toUpperCase() || 'U' }}</span>
                            </div>
                            <div class="profile-info">
                                <h1 class="profile-name">{{ currentUser?.username || '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å' }}</h1>
                                <p class="profile-email">{{ currentUser?.email || 'Email –Ω–µ —É–∫–∞–∑–∞–Ω' }}</p>
                                <p class="profile-join-date">–£—á–∞—Å—Ç–Ω–∏–∫ —Å {{ formatDate(currentUser?.created_at) || '–Ω–µ–¥–∞–≤–Ω–æ' }}</p>
                            </div>
                        </div>
                    </div>

                    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
                    <div class="profile-stats">
                        <div class="stats-grid">
                            <div class="stat-card primary">
                                <div class="stat-icon">üìù</div>
                                <div class="stat-content">
                                    <div class="stat-number">{{ myReviews.length }}</div>
                                    <div class="stat-label">–†–µ—Ü–µ–Ω–∑–∏–π</div>
                                </div>
                            </div>
                            <div class="stat-card success">
                                <div class="stat-icon">üéÆ</div>
                                <div class="stat-content">
                                    <div class="stat-number">{{ userGames }}</div>
                                    <div class="stat-label">–ò–≥—Ä –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏</div>
                                </div>
                            </div>
                            <div class="stat-card warning">
                                <div class="stat-icon">‚úÖ</div>
                                <div class="stat-content">
                                    <div class="stat-number">{{ completedGames }}</div>
                                    <div class="stat-label">–ü—Ä–æ–π–¥–µ–Ω–æ –∏–≥—Ä</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- –ú–æ–∏ —Ä–µ—Ü–µ–Ω–∑–∏–∏ -->
                    <div class="profile-reviews">
                        <div class="content-section">
                            <h3 class="section-title">–ú–æ–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Ä–µ—Ü–µ–Ω–∑–∏–∏</h3>
                            <div v-if="myReviews.length > 0" class="reviews-list compact">
                                <div 
                                    v-for="review in myReviews.slice(0, 3)" 
                                    :key="review.id" 
                                    class="review-item compact"
                                    @click="openReviewPage(review)"
                                >
                                    <div class="review-header">
                                        <h4 class="game-title">{{ review.game_name }}</h4>
                                        <div class="review-rating">{{ review.overall_rating }}/90</div>
                                    </div>
                                    <p class="review-excerpt">{{ review.content.substring(0, 120) }}...</p>
                                    <div class="review-date">{{ formatDate(review.created_at) }}</div>
                                </div>
                            </div>
                            <div v-else class="empty-state small">
                                <div class="empty-icon">üìù</div>
                                <p>–†–µ—Ü–µ–Ω–∑–∏–π –ø–æ–∫–∞ –Ω–µ—Ç</p>
                                <button @click="currentSection = 'search'" class="btn btn-primary btn-sm">
                                    –ù–∞–ø–∏—Å–∞—Ç—å –ø–µ—Ä–≤—É—é —Ä–µ—Ü–µ–Ω–∑–∏—é
                                </button>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>

        <!-- Auth Modals -->
        <div v-if="showLogin" class="modal-overlay" @click="showLogin = false">
            <div class="modal" @click.stop>
                <div class="modal-header">
                    <h2>–í—Ö–æ–¥ –≤ –∞–∫–∫–∞—É–Ω—Ç</h2>
                    <button @click="showLogin = false" class="modal-close">√ó</button>
                </div>
                <form @submit.prevent="login" class="modal-form">
                    <div class="form-group">
                        <label>–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
                        <input v-model="loginData.username" type="text" required class="form-input">
                    </div>
                    <div class="form-group">
                        <label>–ü–∞—Ä–æ–ª—å</label>
                        <input v-model="loginData.password" type="password" required class="form-input">
                    </div>
                    <button type="submit" :disabled="authLoading" class="btn btn-primary btn-full">
                        {{ authLoading ? '–í—Ö–æ–¥...' : '–í–æ–π—Ç–∏' }}
                    </button>
                </form>
                <p v-if="authError" class="error-message">{{ authError }}</p>
                <div class="modal-footer">
                    <p>–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <button @click="showRegister = true; showLogin = false" class="link-btn">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button></p>
                </div>
            </div>
        </div>

        <div v-if="showRegister" class="modal-overlay" @click="showRegister = false">
            <div class="modal" @click.stop>
                <div class="modal-header">
                    <h2>–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç</h2>
                    <button @click="showRegister = false" class="modal-close">√ó</button>
                </div>
                <form @submit.prevent="register" class="modal-form">
                    <div class="form-group">
                        <label>–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
                        <input v-model="registerData.username" type="text" required class="form-input">
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input v-model="registerData.email" type="email" required class="form-input">
                    </div>
                    <div class="form-group">
                        <label>–ü–∞—Ä–æ–ª—å</label>
                        <input v-model="registerData.password" type="password" required minlength="8" class="form-input">
                    </div>
                    <button type="submit" :disabled="authLoading" class="btn btn-primary btn-full">
                        {{ authLoading ? '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è...' : '–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç' }}
                    </button>
                </form>
                <p v-if="authError" class="error-message">{{ authError }}</p>
                <div class="modal-footer">
                    <p>–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <button @click="showLogin = true; showRegister = false" class="link-btn">–í–æ–π—Ç–∏</button></p>
                </div>
            </div>
        </div>

        <!-- Review Modal -->
        <div v-if="showReviewModal" class="modal-overlay" @click="showReviewModal = false">
            <div class="modal large" @click.stop>
                <div class="modal-header">
                    <h2>–ù–∞–ø–∏—Å–∞—Ç—å —Ä–µ—Ü–µ–Ω–∑–∏—é –Ω–∞ "{{ selectedGame?.name }}"</h2>
                    <button @click="showReviewModal = false" class="modal-close">√ó</button>
                </div>
                <form @submit.prevent="submitReview" class="modal-form">
                    <div class="form-group">
                        <label>–ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ä–µ—Ü–µ–Ω–∑–∏–∏</label>
                        <input v-model="reviewData.title" type="text" required class="form-input" placeholder="–û–ø–∏—à–∏—Ç–µ –≤–∞—à–µ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏–µ –æ—Ç –∏–≥—Ä—ã">
                    </div>
                    
                    <div class="form-group">
                        <label>–¢–µ–∫—Å—Ç —Ä–µ—Ü–µ–Ω–∑–∏–∏</label>
                        <textarea 
                            v-model="reviewData.content" 
                            required 
                            class="form-input textarea" 
                            placeholder="–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ –≤–∞—à–µ–º –æ–ø—ã—Ç–µ –∏–≥—Ä—ã, —á—Ç–æ –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å, —á—Ç–æ –Ω–µ—Ç..."
                            rows="5"
                        ></textarea>
                    </div>

                    <div class="rating-categories">
                        <h3>–û—Ü–µ–Ω–∫–∞ –∏–≥—Ä—ã</h3>
                        <div class="rating-grid">
                            <div class="rating-item" v-for="category in ratingCategories" :key="category.key">
                                <label class="rating-label">{{ category.name }}</label>
                                <div class="rating-slider">
                                    <input 
                                        type="range" 
                                        min="1" 
                                        max="10" 
                                        v-model="reviewData[category.key]"
                                        class="slider"
                                    >
                                    <span class="rating-value">{{ reviewData[category.key] }}/10</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="button" @click="showReviewModal = false" class="btn btn-outline">
                            –û—Ç–º–µ–Ω–∞
                        </button>
                        <button type="submit" :disabled="reviewLoading" class="btn btn-primary">
                            {{ reviewLoading ? '–ü—É–±–ª–∏–∫–∞—Ü–∏—è...' : '–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Ä–µ—Ü–µ–Ω–∑–∏—é' }}
                        </button>
                    </div>
                </form>
                <p v-if="reviewError" class="error-message">{{ reviewError }}</p>
            </div>
        </div>

        
    </div>

    <script src="main.js"></script>
</body>
</html>